# ==========================================
# ODDIYA - PRODUCTION CONFIGURATION
# ==========================================
# ‚ö†Ô∏è  DO NOT USE .env FILES IN PRODUCTION  ‚ö†Ô∏è
# This file is for REFERENCE ONLY
#
# In production, use:
# - AWS Secrets Manager
# - Kubernetes Secrets
# - Environment variables from CI/CD
#
# Last updated: 2025-11-03
# ==========================================

# ==========================================
# üöÄ REQUIRED FOR PRODUCTION
# ==========================================

# Google Gemini AI (Production API Key)
GOOGLE_API_KEY=${SECRET:google-gemini-api-key}
GEMINI_MODEL=gemini-2.0-flash-exp

# Redis (AWS ElastiCache or EC2)
REDIS_HOST=redis                        # Docker: "redis" | K8s: "redis-service.oddiya.svc.cluster.local"
REDIS_PORT=6379
REDIS_PASSWORD=${SECRET:redis-password}
REDIS_CACHE_TTL=3600

# ==========================================
# üîê AUTHENTICATION
# ==========================================

# Google OAuth 2.0
GOOGLE_CLIENT_ID=${SECRET:google-oauth-client-id}
GOOGLE_CLIENT_SECRET=${SECRET:google-oauth-client-secret}
OAUTH_REDIRECT_URI=https://api.oddiya.com/api/v1/auth/oauth/google/callback

# JWT Settings
JWT_ACCESS_TOKEN_VALIDITY=3600          # 1 hour
JWT_REFRESH_TOKEN_VALIDITY=1209600      # 14 days

# ==========================================
# üèóÔ∏è INFRASTRUCTURE (if using docker-compose.local.yml)
# ==========================================

# PostgreSQL (if using full stack on EC2)
DB_HOST=postgres
DB_PORT=5432
DB_NAME=oddiya
DB_USER=${SECRET:db-user}
DB_PASSWORD=${SECRET:db-password}

# ==========================================
# üîó SERVICE URLS
# ==========================================
# For Docker Compose (EC2 deployment)
USER_SERVICE_URL=http://user-service:8082
AUTH_SERVICE_URL=http://auth-service:8081
PLAN_SERVICE_URL=http://plan-service:8083
VIDEO_SERVICE_URL=http://video-service:8084
LLM_AGENT_URL=http://llm-agent:8000

# For Kubernetes (EKS deployment)
# USER_SERVICE_URL=http://user-service.oddiya.svc.cluster.local:8082
# AUTH_SERVICE_URL=http://auth-service.oddiya.svc.cluster.local:8081
# PLAN_SERVICE_URL=http://plan-service.oddiya.svc.cluster.local:8083
# VIDEO_SERVICE_URL=http://video-service.oddiya.svc.cluster.local:8084
# LLM_AGENT_URL=http://llm-agent.oddiya.svc.cluster.local:8000

# ==========================================
# ‚òÅÔ∏è AWS SERVICES
# ==========================================
# Use IAM roles instead of access keys when possible

AWS_REGION=ap-northeast-2
AWS_ACCESS_KEY_ID=${SECRET:aws-access-key-id}
AWS_SECRET_ACCESS_KEY=${SECRET:aws-secret-access-key}

# S3 Storage
S3_BUCKET=oddiya-storage-prod

# SQS & SNS
SQS_QUEUE_URL=https://sqs.ap-northeast-2.amazonaws.com/ACCOUNT_ID/oddiya-video-jobs-prod
SNS_TOPIC_ARN=arn:aws:sns:ap-northeast-2:ACCOUNT_ID:oddiya-notifications-prod

# ==========================================
# üåê EXTERNAL APIS
# ==========================================

OPENWEATHER_API_KEY=${SECRET:openweather-api-key}
EXCHANGERATE_API_KEY=${SECRET:exchangerate-api-key}

# ==========================================
# üõ†Ô∏è APPLICATION SETTINGS
# ==========================================

ENVIRONMENT=production
LOG_LEVEL=INFO                          # INFO or WARN for production
MOCK_MODE=false

# ==========================================
# üìä MONITORING
# ==========================================

LANGSMITH_API_KEY=${SECRET:langsmith-api-key}
LANGSMITH_PROJECT=oddiya-prod
LANGSMITH_API_URL=https://api.smith.langchain.com

# ==========================================
# üçé APPLE SIGN IN
# ==========================================

APPLE_CLIENT_ID=${SECRET:apple-client-id}
APPLE_TEAM_ID=${SECRET:apple-team-id}
APPLE_KEY_ID=${SECRET:apple-key-id}
APPLE_PRIVATE_KEY=${SECRET:apple-private-key}

# ==========================================
# üîí PRODUCTION SECURITY CHECKLIST
# ==========================================
# Before going to production, ensure:
#
# ‚úÖ All credentials stored in AWS Secrets Manager
# ‚úÖ IAM roles used instead of access keys
# ‚úÖ TLS/SSL enabled (HTTPS only)
# ‚úÖ Database encryption at rest enabled
# ‚úÖ Redis password authentication enabled
# ‚úÖ VPC security groups properly configured
# ‚úÖ API rate limiting enabled
# ‚úÖ CloudWatch logging enabled
# ‚úÖ Regular credential rotation scheduled
# ‚úÖ DDoS protection (AWS Shield) enabled
# ‚úÖ WAF rules configured
# ‚úÖ Backup strategy implemented
# ‚úÖ Disaster recovery plan documented
#
# ==========================================
# üèóÔ∏è DEPLOYMENT INSTRUCTIONS
# ==========================================
#
# AWS EC2 (Simple Deployment):
# 1. Create .env file on EC2 instance
# 2. Secure permissions: chmod 600 .env
# 3. Source in docker-compose.yml
# 4. Deploy: docker-compose up -d
#
# AWS Secrets Manager (Recommended):
# 1. Create secrets in AWS Secrets Manager
# 2. Grant EC2 instance IAM role access
# 3. Load secrets at runtime
# 4. No .env file needed
#
# Kubernetes/EKS (Advanced):
# 1. Create Kubernetes Secrets
# 2. Reference in deployment manifests
# 3. Use sealed-secrets for GitOps
# 4. No .env file needed
#
# ==========================================
# üìö DOCUMENTATION
# ==========================================
# Deployment guide: docs/deployment/DEPLOYMENT_GUIDE.md
# Security best practices: CONFIGURATION.md
# AWS setup: docs/deployment/AWS_EC2_SETUP.md
#
